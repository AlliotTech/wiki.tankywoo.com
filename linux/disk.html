<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/static/css/colorful.css">
    <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>磁盘相关 - Wiki · Tanky Woo</title>
    <meta name="keywords" content="wiki, makrdown, linux, python, cpp, ops, simiki"/>
    <meta name="description" content="Tanky Woo's personal wiki, powered by vim and markdown. Focus on Python, C/C++, Linux, Ops-Dev, Gentoo, and so on."/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
  </head>

  <body>
    <div id="container" class="typo">
      
<div id="header">
  <div id="post-nav">
    <a href="/">Wiki · Tanky Woo</a>
    &nbsp;&#187;&nbsp;
    <a href="/#linux">linux</a>
    &nbsp;&#187;&nbsp;磁盘相关
    <span class="updated">当前页面最后更新&nbsp;
    2017-08-23 16:37
    
    </span>
  </div>
</div>
<div class="clearfix"></div>
<div id="content">
  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#_1">更多</a></li>
</ul>
</div>
<p>FROM: <a href="http://unix.stackexchange.com/questions/5085/how-to-see-disk-details-like-manufacturer-in-linux">http://unix.stackexchange.com/questions/5085/how-to-see-disk-details-like-manufacturer-in-linux</a></p>
<div class="hlcode"><pre>lshw -class disk
  *-disk:0
       description: SCSI Disk
       product: PERC H710
       vendor: Winbond Electronics
       physical id: 2.0.0
       bus info: scsi@0:2.0.0
       logical name: /dev/sda
       version: 3.13
       serial: 00d6621b0483fd451f00f570dce03f08
       size: 278GiB (299GB)
       capabilities: partitioned partitioned:dos
       configuration: ansiversion=5 signature=48992565
  *-disk:1
       description: SCSI Disk
       product: PERC H710
       vendor: Winbond Electronics
       physical id: 2.1.0
       bus info: scsi@0:2.1.0
       logical name: /dev/sdb
       version: 3.13
       serial: 00954bd7048ffd451f00f570dce03f08
       size: 278GiB (299GB)
       capabilities: partitioned partitioned:dos
       configuration: ansiversion=5 signature=4ea89616
</pre></div>


<p>显示是PERC H710的Raid 控制器(PowerEdge RAID Controller)。</p>
<p>FROM <a href="http://serverfault.com/questions/381177/megacli-get-the-dev-sd-device-name-for-a-logical-drive">http://serverfault.com/questions/381177/megacli-get-the-dev-sd-device-name-for-a-logical-drive</a></p>
<div class="hlcode"><pre>ls -l /dev/disk/by-path/
total 0
lrwxrwxrwx 1 root root  9 Sep 28 20:27 pci-0000:02:00.0-scsi-0:2:0:0 -&gt; ../../sda
lrwxrwxrwx 1 root root 10 Sep 28 20:27 pci-0000:02:00.0-scsi-0:2:0:0-part1 -&gt; ../../sda1
lrwxrwxrwx 1 root root  9 Sep 28 20:27 pci-0000:02:00.0-scsi-0:2:1:0 -&gt; ../../sdb
lrwxrwxrwx 1 root root 10 Sep 28 20:27 pci-0000:02:00.0-scsi-0:2:1:0-part1 -&gt; ../../sdb1
lrwxrwxrwx 1 root root  9 Sep 28 20:27 pci-0000:02:00.0-scsi-0:2:2:0 -&gt; ../../sdc
lrwxrwxrwx 1 root root 10 Sep 28 20:27 pci-0000:02:00.0-scsi-0:2:2:0-part1 -&gt; ../../sdc1
lrwxrwxrwx 1 root root  9 Sep 28 20:27 pci-0000:02:00.0-scsi-0:2:3:0 -&gt; ../../sdd
lrwxrwxrwx 1 root root 10 Sep 28 20:27 pci-0000:02:00.0-scsi-0:2:3:0-part1 -&gt; ../../sdd1
</pre></div>


<p>FROM: <a href="http://www.cyberciti.biz/faq/linux-checking-sas-sata-disks-behind-adaptec-raid-controllers/">http://www.cyberciti.biz/faq/linux-checking-sas-sata-disks-behind-adaptec-raid-controllers/</a></p>
<div class="hlcode"><pre>$ lspci | grep -i raid
02:00.0 RAID bus controller: LSI Logic / Symbios Logic MegaRAID SAS 2208 [Thunderbolt] (rev 05)
</pre></div>


<p>FROM: <a href="https://www.thomas-krenn.com/en/wiki/Smartmontools_with_MegaRAID_Controller#cite_note-1">https://www.thomas-krenn.com/en/wiki/Smartmontools_with_MegaRAID_Controller#cite_note-1</a></p>
<p>smartctl provides integrated support for MegaRAID controller. Access is made in the following manner:</p>
<div class="hlcode"><pre># Where &lt;N&gt; stands for the device ID on the RAID controller.
$ smartctl -a -d megaraid,N  /dev/sdX
</pre></div>


<p>FROM <code>man smartctl</code>:</p>
<blockquote>
<p>megaraid,N - [Linux only] the device consists of one or more SCSI/SAS disks connected to a MegaRAID controller. The non-negative integer N (in the range of 0 to 127 inclusive) denotes which disk on the controller is monitored.  Use syntax such as:</p>
<p>smart supported raid control: <a href="https://www.smartmontools.org/wiki/Supported_RAID-Controllers">https://www.smartmontools.org/wiki/Supported_RAID-Controllers</a></p>
</blockquote>
<div class="hlcode"><pre># 查找raid控制器的型号
$ lspci -nn | grep -i raid
02:00.0 RAID bus controller [0104]: Hewlett-Packard Company Smart Array Gen8 Controllers [103c:323b] (rev 01)

# 根据 https://www.smartmontools.org/wiki/Supported_RAID-Controllers
# 使用cciss类型

# 可以使用hpacucli工具, http://www.thegeekstuff.com/2014/07/hpacucli-examples/
$ smartctl -a -d cciss,0 /dev/sda

## 如果是LSI MegaRAID SAS Controller
$ lspci -nn | grep -i raid
84:00.0 RAID bus controller [0104]: LSI Logic / Symbios Logic MegaRAID SAS 2108 [Liberator] [1000:0079] (rev 05)

# 根据以下获取N
$ megacli -AdpAllInfo -aAll
Number of Backend Port: 8
Port  :  Address
0        5000c5007ef85205
1        5000c5007e988439
2        5000c5007ef86209
3        5000c5007e9868b1
4        0000000000000000
5        0000000000000000
6        0000000000000000
7        0000000000000000

$ megacli -PDList -Aall | egrep &#39;Device Id|SAS Address&#39;
Device Id: 11
SAS Address(0): 0x5000c5007e9868b1
SAS Address(1): 0x0
Device Id: 10
SAS Address(0): 0x5000c5007ef86209
SAS Address(1): 0x0
Device Id: 9
SAS Address(0): 0x5000c5007e988439
SAS Address(1): 0x0
Device Id: 8
SAS Address(0): 0x5000c5007ef85205
SAS Address(1): 0x0
</pre></div>


<h2 id="_1">更多</h2>
<ul>
<li><a href="https://www.smartmontools.org/">官网</a></li>
<li><a href="https://wiki.debian.org/LinuxRaidForAdmins">Linux Raid For Admins</a></li>
<li><a href="https://wiki.hetzner.de/index.php/LSI_RAID_Controller/en">LSI Raid Controller</a></li>
</ul>
  
</div>
    </div>
    <div id="footer">
      <div class="footer-left">
        <p>
        Copyright © 2012-2017 Tanky Woo.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
        Theme by <a href="https://git.coding.net/tankywoo/yasimple_x2.git" target="_blank">YASimple_X2</a>.
        </p>
        <p>本作品采用<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。</p>
      </div> <!-- end footer-left -->
      <div class="footer-right">
        <p>站点最后生成 2017-10-10 15:01:19</p>
        <p><a href="https://github.com/tankywoo/wiki.tankywoo.com">Fork me on Github</a></p>
        <p><a href="http://www.miitbeian.gov.cn/">京ICP备16016622号</a></p>
      </div> <!-- end footer-right -->
    </div>

    
    

    <script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F754de327571c0ba7ff50a61fc964e196' type='text/javascript'%3E%3C/script%3E"));
    </script>
  </body>
</html>