<!DOCTYPE HTML>
<html>
	<head>
		<link rel="Stylesheet" type="text/css" href="/css/style.css">
		<title>Python 进程/线程 @ TankyWoo's Wiki</title>
		<meta name="keywords" content="TankyWoo, Wiki, vimwiki, linux, python, cpp"/>
		<meta name="description" content="A wiki about Linux, Python, and so on"/>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
	</head>
	<body>
		<div id="header">
			<ul>
				<li><a href='/'>Home</a></li>
				<li><a href='http://www.wutianqi.com'>Blog</a></li>
				<li><a href='https://github.com/tankywoo/wiki'>Github</a></li>
			</ul>
		</div>
		<div class="clearfix">
		</div>
		<div id="title">Python 进程/线程</div>
		<div id="content">
			

<h1 id="toc_1">Python的伪多线程</h1>
<p>
相关讨论:
</p>
<ul>
<li>
<a href="http://bbs.chinaunix.net/thread-1264893-1-1.html">py的多线程是伪线程吗?</a>

<li>
<a href="http://mail.python.org/pipermail/python-3000/2007-May/007414.html">[Python-3000] the future of the GIL</a>

<li>
<a href="http://bbs.csdn.net/topics/390226723">Python多线程的问题</a>

</ul>

<h1 id="toc_2">相关的模块</h1>
<ul>
<li>
thread

<li>
threading

<li>
Queue

<li>
multiprocessing

</ul>

<h1 id="toc_3">threading</h1>
<p>
PyMOTW <a href="http://www.doughellmann.com/PyMOTW/threading/index.html">Manege concurrent threads</a>
</p>

<p>
在看上面链接的第一个代码时，遇到了一个<code>print</code>和<code>sys.stdout.write</code>的问题<br />
具体见<a href="TODO.html">TODO</a>
</p>

<p>
最简单的threading配合Queue的Example
</p>
<pre class="brush: python">
#!/usr/bin/env python
# -*- coding: utf-8 -*-
# wutq@2013-02-18
# Python参考手册 P363

import threading
from Queue import Queue

class WorkThread(threading.Thread):
	def __init__(self, *args, **kwargs):
		threading.Thread.__init__(self, *args, **kwargs)
		self.input_queue = Queue()

	def send(self, item):
		self.input_queue.put(item)

	def close(self):
		#在队列上设置一个标志，使线程在处理完毕后关闭
		self.input_queue.put(None)
		self.input_queue.join()

	def run(self):
		while True:
			item = self.input_queue.get()
			if item is None:
				break
			print item
			self.input_queue.task_done()
		self.input_queue.task_done()
		return

w = WorkThread()
w.start()
w.send("hello")
w.send("world")
w.close()
</pre>

<p>
在StackOverflow上也找到一篇帖子：<a href="http://stackoverflow.com/questions/2846653/python-multithreading-for-dummies">python multithreading for dummies</a>
里面也提到了
</p>
<pre>
CPython can use threads only for *I\O waits* due to *GIL*. 
If you want to benefit from multiple cores for CPU-bound tasks, use *mutliprocessing*
</pre>

		</div>

		<!-- DISQUS BEGIN -->
		<!-- DISQUS END -->
		<div id="footer">
			<span class="">Copyright © 2012 <a href="http://www.wutianqi.com/" target="_blank">Tanky Woo</a> 
				Powered by <a href="http://www.vim.org/" target="_blank">Vim</a> and <a href="http://code.google.com/p/vimwiki/" target="_blank">Vimwiki</a>
			</span>
		</div>
		<!-- bShare -->
		<a class="bshareDiv" href="http://www.bshare.cn/share">分享按钮</a>
		<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#uuid=&amp;style=4&amp;fs=4&amp;bgcolor=Grey"></script>
	</body>
	
	<!-- add _blank to outer links -->
	<script type="text/javascript">
	$("a[href^='http://']").each(function(){
			this.target = "_blank";
	});

	$("a[href^='https://']").each(function(){
			this.target = "_blank";
	});

	$('h2').prepend('>> ')
	$('h3').prepend('>>> ')

	</script>
</html>
